#!/usr/bin/python

import mechanize
cookies=mechanize.CookieJar()
br1=mecahnize.Browser()
br1.set_cookiejar(cookies)

#see previous exercise as well:
#login to DVWA:
print('browser 1:')
br1.open('http://172.16.94.135/dvwa/')
print(br1.title())
br1.select_form(nr=0)
br1.form['username'] = 'admin'
br1.form['password'] = 'password'
br1.submit()
br1.response().read()
print(br1.title())

#now we have logged in; the created cookie can now be used to login from another browser without using the form
# 2 cookies were created:
# cookies[0]: cookie version 0 name phpsessid value.... port, domain, path, etc.
# cookies[1]: cookie version 0 name security value high port domain, path, etc.

#now if we make a new browser instance, we can let it use the other cookiejar:
print('browser 2:')
br2.mechanize.Browser()
br2.set_cookiejar(cookies)
br2.open('http://172.16.94.135/dvwa/')
print(br2.title())

